# Session Summary: January 4, 2026

## Goal
Adding **closed-form eigenvector computation** to Lie group patterns in SymbolicDiagonalization.jl.

## Motivation
Many Lie groups (SO(2), SO(3), SU(2), SU(3)) have eigenvectors with known closed forms that don't depend on the rotation angle, making symbolic computation much faster than the general nullspace approach.

## What Was Completed

### 1. Added `_lie_group_eigenpairs` Dispatcher
In `src/patterns/lie/common.jl` - routes to appropriate eigenpair function based on detected group.

### 2. Added SO(2) Eigenpairs
In `src/patterns/lie/SO2.jl`:
- `_SO2_eigenvectors()` - Returns fixed eigenvectors `[1, i]` and `[1, -i]`
- `_SO2_eigenpairs(A)` - Returns eigenvalue-eigenvector pairs
- `SO2_kron_eigenvectors(k)` - Tensor products for k-fold Kronecker products
- `_SO2_kron_eigenpairs(mat)` - Eigenpairs for SO(2)⊗SO(2)⊗...

### 3. Added SO(3) Eigenpairs
In `src/patterns/lie/SO3.jl`:
- `_SO3_axis_type(A)` - Detects if rotation is around x, y, or z axis
- `_SO3_axis_eigenvectors(axis_type)` - Returns eigenvectors for axis-aligned rotations
- `_SO3_eigenpairs(A)` - Returns eigenpairs for Rx, Ry, Rz

### 4. Added SU(2) Eigenpairs
In `src/patterns/lie/SU2.jl`:
- `_SU2_rotation_type(A)` - Detects Ux, Uy, Uz axis types
- `_SU2_axis_eigenvectors(axis_type)` - Returns eigenvectors
- `_SU2_eigenpairs(A)` - Returns eigenpairs for axis-aligned SU(2)

### 5. Added SU(3) Eigenpairs
In `src/patterns/lie/SU3.jl`:
- `_SU3_eigenpairs(A)` - For diagonal SU(3) only, returns standard basis eigenvectors

### 6. Modified `symbolic_eigenpairs`
In `src/diagonalize.jl` - added early check for Lie group eigenpairs before falling back to nullspace computation.

### 7. Added Tests
Added comprehensive testset "Lie Group Eigenvectors" to `test/test_lie_groups.jl`.

### 8. Fixed Eigenvector-Eigenvalue Pairing
Discovered and fixed incorrect eigenvalue-eigenvector pairing:
- **Correct pairing**: `e^{-iθ}` ↔ `[1, i]`, `e^{iθ}` ↔ `[1, -i]`
- Fixed in SO2.jl ✓
- Fixed in SO3.jl ✓

## Eigenvector Formulas (Corrected)

| Group | Eigenvalue | Eigenvector |
|-------|------------|-------------|
| **SO(2)** | `e^{-iθ}` | `[1, i]` |
| **SO(2)** | `e^{iθ}` | `[1, -i]` |
| **SO(3) Rz** | `1` | `[0, 0, 1]` |
| **SO(3) Rz** | `e^{-iθ}` | `[1, i, 0]` |
| **SO(3) Rz** | `e^{iθ}` | `[1, -i, 0]` |
| **SU(2) Uz** | `e^{-iθ/2}` | `[1, 0]` |
| **SU(2) Uz** | `e^{iθ/2}` | `[0, 1]` |
| **SU(3) diag** | diagonal entries | standard basis |

## Files Modified

```
src/patterns/lie/
├── common.jl   - Added _lie_group_eigenpairs dispatcher
├── SO2.jl      - Added eigenpair functions, fixed eigenvalue pairing
├── SO3.jl      - Added eigenpair functions, fixed eigenvalue pairing
├── SU2.jl      - Added eigenpair functions
├── SU3.jl      - Added eigenpair functions

src/
├── diagonalize.jl  - Modified symbolic_eigenpairs to use Lie group eigenpairs

test/
├── test_lie_groups.jl  - Added eigenvector test section
```

## Next Steps (TODO)

1. **Run full test suite** - Verify all tests pass after the eigenvector pairing fixes
2. **Check SU(2) eigenvector pairing** - Verify Ux, Uy, Uz have correct pairing (may need similar fix)
3. **Update test expectations** - The test file may have outdated expected values
4. **Numerical verification** - Confirm A*v = λ*v for all implemented groups
5. **Consider adding SO(4), Sp eigenvectors** - More complex, lower priority

## Key Technical Insight

For rotation groups, eigenvectors are **angle-independent**. For SO(2):
```
R(θ) * [1, i]ᵀ = e^{-iθ} * [1, i]ᵀ
R(θ) * [1, -i]ᵀ = e^{iθ} * [1, -i]ᵀ
```

This allows precomputing eigenvectors symbolically without solving the nullspace equation, dramatically speeding up symbolic diagonalization.

## Quick Test Command

```bash
cd /home/vsilv/.nextcloud/src/SymbolicDiagonalization.jl
julia --project -e 'using Pkg; Pkg.test()'
```
